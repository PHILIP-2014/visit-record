#set($layout="/layout/default_unlogin.vm")
<div class="px-page">
    <div class="px-page-header">
        <a href="http://www.parox.cn" class="px-logo">
            <h1 class="px-logo-img">杭州道曼科技有限公司</h1>
            <p class="px-explain">分享快速，工作超越</p>
        </a>

        <a href="/login" class="px-btn px-btn-success pull-right" ng-if="!sendEmailSuccess&&!sendMobileSuccess">登录</a>
    </div>
    <div class="px-page-body px-retrieve-password" ng-controller="RetrievePasswordController">
        <div class="px-panel hid" ng-if="!sendEmailSuccess&&!sendMobileSuccess&&!validateMobileSuccess"
             ng-class="{show:!sendEmailSuccess&&!sendMobileSuccess&&!validateMobileSuccess,hid:sendEmailSuccess||sendMobileSuccess||validateMobileSuccess}">
            <div class="px-panel-header">
                <h1 class="px-main-title text-center">找回密码</h1>
            </div>

            <form name="retrievePasswordForm" ng-submit="onSubmit()" class="px-form">
                <div class="input-group px-float">
                    <p class="explain">输入您要找回的帐号</p>
                    <input name="account" type="text" class="form-control px-input-base"
                        placeholder="邮箱或手机号" ng-model="account.account"
                         ng-pattern="/^(^1[3|4|5|8]\d{9}$)|(^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})$)+$/"
                         auto-focus support360  required="">
                </div>
                <div class="form-group">
                    <button class="form-control px-btn px-btn-primary" ng-disabled="retrievePasswordForm.$invalid">
                        <span ng-bind="submitBtn.text"></span>
                    </button>
                </div>
            </form>
        </div>
        <!---手机验证码填写页--->
        <div class="px-panel px-enter-mail hid" ng-class="{show:sendMobileSuccess,hid:!sendMobileSuccess}">
            <div class="px-panel-header">
                <h1 class="px-main-title text-center">短信验证码已发送至<span ng-bind="account.account|pxFilterMobile"></span></h1>
            </div>
            <form class="px-form" name="validateCodeForm" ng-submit="validateCode()">
                <div class="input-group px-float">
                    <input name="account" type="text" class="form-control px-input-base"
                           placeholder="请输入手机收到的验证码" ng-model="account.validCode"
                           ng-minlength="4" ng-maxlength="6"
                           ng-pattern="/^[\d]{4,6}$/"
                           auto-focus support360  required="">
                </div>
                <div class="form-group">
                    <button class="form-control px-btn px-btn-primary" ng-disabled="validateCodeForm.$invalid">
                        <span>立即验证</span>
                    </button>
                </div>
                <div class="font-14 px-panel-bottom">
                    没有收到短信？
                    <a href="javascript:;" ng-click="sendMessage()" class="px-send-again-btn"  ng-show="!showCountdown">
                        重新发送
                    </a>
                    <div ng-show="showCountdown" class="countDown"><span ng-bind="countdown"></span>s</div>
                    <a href="javascript:;" ng-click="backTo()" class="back">返回</a>
                </div>
            </form>
        </div>
        <!--手机账号修改密码-->
        <div class="px-panel px-enter-mail" ng-if="validateMobileSuccess" ng-class="{show:validateMobileSuccess,hid:!validateMobileSuccess}">

            <modify-phone-password mobile-account="account"></modify-phone-password>

        </div>
        <!--邮件查收页-->
        <div  class="px-panel px-enter-mail hid" ng-if="sendEmailSuccess" ng-class="{show:sendEmailSuccess,hid:!sendEmailSuccess}">
            <div class="px-panel-header">
                <h1 class="px-main-title text-center">密码重置邮件已发送至邮箱</h1>
            </div>
            <div class="px-form">
                <div class="form-group mail-text">
                    <span ng-bind="::account.account"></span>
                </div>
                <div class="form-group">
                    <button class="form-control px-btn px-btn-primary" px-enter-mail-web="account.account">
                        <span>立即查收邮箱</span>
                    </button>
                </div>
                <div class="font-14 px-panel-bottom">
                    没有收到邮件？
                    <a href="javascript:;" ng-click="sendEmail()" class="px-send-again-btn" ng-show="!showCountdown">
                        重新发送
                    </a>
                    <div ng-show="showCountdown" class="countDown"><span ng-bind="countdown"></span>s</div>
                    <a href="javascript:;" ng-click="backTo()" class="back">返回</a>
                  </div>
            </div>
        </div>

    </div>
</div>
<input id="module-name" type="hidden" value="app.register-login">
<script type="text/javascript">
    document.title="找回密码-派乐";
</script>

